<div x-data="{ 'showSearchModal': false }" @keydown.escape="showSearchModal = false">
  <!-- Trigger for Modal -->
  <button id="searchButton" type="button" @click="showSearchModal = true" class="text-white rounded-lg flex items-center justify-center mb-3">
    <span class="sr-only">Search site</span>
    <svg class="w-full h-auto" viewBox="0 0 221 47" fill="none" xmlns="http://www.w3.org/2000/svg">
<g filter="url(#filter0_d_13659_62490)">
<rect x="2.89746" y="1.6748" width="216" height="42" rx="6" fill="currentColor"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M23.8975 16.6748C21.6883 16.6748 19.8975 18.4657 19.8975 20.6748C19.8975 22.8839 21.6883 24.6748 23.8975 24.6748C26.1066 24.6748 27.8975 22.8839 27.8975 20.6748C27.8975 18.4657 26.1066 16.6748 23.8975 16.6748ZM17.8975 20.6748C17.8975 17.3611 20.5838 14.6748 23.8975 14.6748C27.2112 14.6748 29.8975 17.3611 29.8975 20.6748C29.8975 21.9706 29.4867 23.1705 28.7882 24.1513L33.6046 28.9677C33.9951 29.3582 33.9951 29.9914 33.6046 30.3819C33.214 30.7724 32.5809 30.7724 32.1904 30.3819L27.374 25.5656C26.3932 26.264 25.1933 26.6748 23.8975 26.6748C20.5838 26.6748 17.8975 23.9885 17.8975 20.6748Z" fill="#6B7280"/>
<path d="M45.2895 25.1628C45.6841 25.6001 46.1695 25.9628 46.7455 26.2508C47.3215 26.5388 47.9561 26.6828 48.6495 26.6828C49.5135 26.6828 50.1481 26.5015 50.5535 26.1388C50.9588 25.7655 51.1615 25.3335 51.1615 24.8428C51.1615 24.4481 51.0388 24.1281 50.7935 23.8828C50.5588 23.6268 50.2655 23.4295 49.9135 23.2908C49.5615 23.1521 49.0761 22.9975 48.4575 22.8268C47.6681 22.6241 47.0335 22.4268 46.5535 22.2348C46.0841 22.0428 45.6788 21.7548 45.3375 21.3708C45.0068 20.9761 44.8415 20.4535 44.8415 19.8028C44.8415 19.2268 45.0015 18.7148 45.3215 18.2668C45.6415 17.8188 46.0788 17.4721 46.6335 17.2268C47.1881 16.9708 47.8121 16.8428 48.5055 16.8428C50.0948 16.8428 51.3588 17.3388 52.2975 18.3308L51.4975 19.3068C51.1135 18.8801 50.6548 18.5601 50.1215 18.3468C49.5881 18.1335 49.0175 18.0268 48.4095 18.0268C47.7695 18.0268 47.2415 18.1868 46.8255 18.5068C46.4201 18.8161 46.2175 19.2215 46.2175 19.7228C46.2175 20.0535 46.3295 20.3308 46.5535 20.5548C46.7881 20.7681 47.0708 20.9388 47.4015 21.0668C47.7321 21.1841 48.2015 21.3228 48.8095 21.4828C49.5988 21.6961 50.2388 21.9095 50.7295 22.1228C51.2308 22.3255 51.6575 22.6401 52.0095 23.0668C52.3615 23.4828 52.5375 24.0375 52.5375 24.7308C52.5375 25.2855 52.4041 25.8028 52.1375 26.2828C51.8708 26.7521 51.4388 27.1361 50.8415 27.4348C50.2548 27.7228 49.5081 27.8668 48.6015 27.8668C47.7161 27.8668 46.9268 27.7175 46.2335 27.4188C45.5508 27.1095 44.9748 26.6935 44.5055 26.1708L45.2895 25.1628ZM54.0245 23.8028C54.0245 23.0668 54.1898 22.3895 54.5205 21.7708C54.8511 21.1521 55.3045 20.6615 55.8805 20.2988C56.4565 19.9361 57.1071 19.7548 57.8325 19.7548C58.5898 19.7548 59.2458 19.9361 59.8005 20.2988C60.3658 20.6615 60.7978 21.1575 61.0965 21.7868C61.3951 22.4161 61.5445 23.1201 61.5445 23.8988V24.2028H55.2885C55.3418 24.9601 55.6191 25.5948 56.1205 26.1068C56.6218 26.6188 57.2725 26.8748 58.0725 26.8748C58.5205 26.8748 58.9525 26.7895 59.3685 26.6188C59.7951 26.4481 60.1578 26.2081 60.4565 25.8988L61.0325 26.6828C60.2431 27.4721 59.2191 27.8668 57.9605 27.8668C57.2031 27.8668 56.5258 27.6961 55.9285 27.3548C55.3311 27.0135 54.8618 26.5335 54.5205 25.9148C54.1898 25.2961 54.0245 24.5921 54.0245 23.8028ZM57.8165 20.7468C57.2938 20.7468 56.8458 20.8748 56.4725 21.1308C56.0991 21.3868 55.8111 21.7121 55.6085 22.1068C55.4165 22.5015 55.3098 22.9068 55.2885 23.3228H60.3605C60.3498 22.9068 60.2485 22.5015 60.0565 22.1068C59.8751 21.7121 59.5925 21.3868 59.2085 21.1308C58.8351 20.8748 58.3711 20.7468 57.8165 20.7468ZM68.3201 26.7948C67.6694 27.5095 66.8161 27.8668 65.7601 27.8668C65.3014 27.8668 64.8641 27.7708 64.4481 27.5788C64.0428 27.3761 63.7068 27.0828 63.4401 26.6988C63.1841 26.3041 63.0561 25.8401 63.0561 25.3068C63.0561 24.7628 63.1841 24.2988 63.4401 23.9148C63.7068 23.5308 64.0428 23.2428 64.4481 23.0508C64.8641 22.8588 65.3014 22.7628 65.7601 22.7628C66.8588 22.7628 67.7121 23.1148 68.3201 23.8188V22.4268C68.3201 21.9148 68.1388 21.5148 67.7761 21.2268C67.4134 20.9388 66.9441 20.7948 66.3681 20.7948C65.8988 20.7948 65.4721 20.8855 65.0881 21.0668C64.7041 21.2375 64.3414 21.5041 64.0001 21.8668L63.4401 21.0348C63.8561 20.5975 64.3148 20.2775 64.8161 20.0748C65.3281 19.8615 65.8988 19.7548 66.5281 19.7548C67.4134 19.7548 68.1334 19.9681 68.6881 20.3948C69.2428 20.8215 69.5201 21.4775 69.5201 22.3628V27.6748H68.3201V26.7948ZM68.3201 24.5868C68.0961 24.2775 67.7921 24.0428 67.4081 23.8828C67.0348 23.7121 66.6294 23.6268 66.1921 23.6268C65.6374 23.6268 65.1788 23.7868 64.8161 24.1068C64.4641 24.4161 64.2881 24.8215 64.2881 25.3228C64.2881 25.8135 64.4641 26.2188 64.8161 26.5388C65.1788 26.8481 65.6374 27.0028 66.1921 27.0028C66.6294 27.0028 67.0348 26.9228 67.4081 26.7628C67.7921 26.5921 68.0961 26.3521 68.3201 26.0428V24.5868ZM71.9256 19.9468H73.1256V21.1948C73.4563 20.7681 73.8403 20.4268 74.2776 20.1708C74.7256 19.9148 75.2003 19.7868 75.7016 19.7868V21.0188C75.5523 20.9868 75.3923 20.9708 75.2216 20.9708C74.8589 20.9708 74.4643 21.0988 74.0376 21.3548C73.6109 21.6108 73.3069 21.8935 73.1256 22.2028V27.6748H71.9256V19.9468ZM76.7588 23.8028C76.7588 23.0455 76.9188 22.3575 77.2388 21.7388C77.5695 21.1201 78.0228 20.6348 78.5988 20.2828C79.1855 19.9308 79.8575 19.7548 80.6148 19.7548C81.2762 19.7548 81.8308 19.8721 82.2788 20.1068C82.7268 20.3415 83.1162 20.6721 83.4468 21.0988L82.6468 21.8348C82.1562 21.1628 81.5002 20.8268 80.6788 20.8268C79.8682 20.8268 79.2175 21.1041 78.7268 21.6588C78.2468 22.2135 78.0068 22.9281 78.0068 23.8028C78.0068 24.6775 78.2468 25.3975 78.7268 25.9628C79.2175 26.5175 79.8682 26.7948 80.6788 26.7948C81.4895 26.7948 82.1455 26.4588 82.6468 25.7868L83.4468 26.5228C83.1162 26.9495 82.7268 27.2801 82.2788 27.5148C81.8308 27.7495 81.2762 27.8668 80.6148 27.8668C79.8575 27.8668 79.1855 27.6908 78.5988 27.3388C78.0228 26.9868 77.5695 26.5015 77.2388 25.8828C76.9188 25.2641 76.7588 24.5708 76.7588 23.8028ZM90.3607 22.5868C90.3607 21.9468 90.2114 21.4935 89.9127 21.2268C89.614 20.9601 89.182 20.8268 88.6167 20.8268C88.1794 20.8268 87.7474 20.9441 87.3207 21.1788C86.9047 21.4135 86.574 21.6961 86.3287 22.0268V27.6748H85.1287V17.0028H86.3287V21.0668C86.6274 20.7148 87.0274 20.4108 87.5287 20.1548C88.03 19.8881 88.5527 19.7548 89.0967 19.7548C90.7394 19.7548 91.5607 20.5761 91.5607 22.2188V27.6748H90.3607V22.5868Z" fill="#6B7280"/>
<rect x="3.39746" y="2.1748" width="215" height="41" rx="5.5" stroke="#E3EBF3"/>
</g>
<defs>
<filter id="filter0_d_13659_62490" x="0.897461" y="0.674805" width="220" height="46" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
<feFlood flood-opacity="0" result="BackgroundImageFix"/>
<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
<feOffset dy="1"/>
<feGaussianBlur stdDeviation="1"/>
<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05 0"/>
<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_13659_62490"/>
<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_13659_62490" result="shape"/>
</filter>
</defs>
</svg>

  </button>

  <!-- Modal -->
  <div class="fixed inset-0 z-30 hidden items-center justify-center overflow-auto bg-brand bg-opacity-80" :class="{ 'hidden': ! showSearchModal, 'flex': showSearchModal }" x-show="showSearchModal">
    <!-- Modal inner -->
    <div class="w-full max-w-4xl sm:p-10 mx-auto" @click.away="showSearchModal = false" x-transition:enter="motion-safe:ease-out duration-300" x-transition:enter-start="opacity-0 scale-90" x-transition:enter-end="opacity-100 scale-100">
      <!-- Title / Close-->
      <div class="flex items-center justify-end mb-10">
        <button type="button" class="z-10 text-white rounded-full text-white p-1 border border-white cursor-pointer" @click="showSearchModal = false">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewbox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <!-- content -->
      <div id="ajax-filters-mobile" class="w-auto search-filters-mobile relative z-20">
        {!! do_shortcode('[searchandfilter slug="site-search"]') !!}
      </div>
    </div>
  </div>
</div>
<style>
#ajax-filters.search-filters input[type="submit"] {
  background: #216cff;
  color: white;
}
@media only screen and (max-width: 940px) {
  #ajax-filters.search-filters {
    background: transparent;
  }
  #ajax-filters.search-filters .sf-field-post_type {
    border-top-left-radius: 8px;
    border-bottom-left-radius: 8px;
  }
  #ajax-filters.search-filters input[type="submit"] {
    border-top-right-radius: 8px;
    border-bottom-right-radius: 8px;
    line-height: 1;
  }
  #ajax-filters.search-filters {
    padding: 0;
  }
  #ajax-filters.search-filters .sf-field-search {
    border: none;
  }
  #ajax-filters.search-filters ul li {
    padding: 0px 1rem;
    margin: 0;
    display: flex;
    flex-grow: 1;
    align-items: center;
    background: #fff;
  }
  #ajax-filters.search-filters ul li.sf-field-submit {
    padding: 0;
    flex-grow: 0;
    background: transparent;
  }
  #ajax-filters.search-filters ul {
    display: flex;
    justify-content: center;
    align-items: normal;
  }
}
</style>
<script>
  jQuery().ready(function($) {
    var index = 0;
    if ($(window).width() > 1023) {
      index = 1;
    }
    $('#searchButton svg').click(function() {
      setTimeout(function() {
        $("input[name='_sf_search[]']").eq(index).focus();
      }, 100);
    });
});
</script>
